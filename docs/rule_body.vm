#**
This template is used for including rule definitions as subsections within larger sections in generated stardoc docstrings.
*#
#*
Workaround for markdownCellFormat() not allowing HTML (specifically lists) to be rendered in attribute table cells.
For now, if a list is declared with '<ul>' in the docstring, "``` stuff ```" needs to be manually changed to "<pre><code>stuff</code></pre>"
and "`stuff`" needs to be changed to "<code>stuff</code>"

TODO: Create a PR against bazel, adding a boolean parameter to
https://github.com/bazelbuild/bazel/blob/37bd0d027629bf0e3418208bb5ef9f6c4507f54/src/main/java/com/google/devtools/build/skydoc/rendering/MarkdownUtil.java#L51
which toggles HTML escaping.
*#
#macro( markdownCellFormatNoEscapeHtml $docString )#*
  *##if ($docString.contains("<ul>"))#*
      *#${docString.trim().replaceAll("\n(\\s*\n)+", "<br><br>").replaceAll("\n", " ")}#*
  *##else#*
      *#${util.markdownCellFormat($docString)}#*
  *##end#*
*##end

<a id="#${ruleName}"></a>

#[[##]]# ${ruleName}

<pre>
${util.ruleSummary($ruleName, $ruleInfo)}
</pre>

${ruleInfo.docString}

**ATTRIBUTES**

#if (!$ruleInfo.getAttributeList().isEmpty())

| Name  | Description | Type | Mandatory | Default |
| :------------- | :------------- | :------------- | :------------- | :------------- |
#foreach ($attribute in $ruleInfo.getAttributeList())
| <a id="${ruleName}-${attribute.name}"></a>$attribute.name | #if(!$attribute.docString.isEmpty()) #markdownCellFormatNoEscapeHtml( $attribute.docString ) #else - #end  | ${util.attributeTypeString($attribute)} | ${util.mandatoryString($attribute)} | $attribute.defaultValue |
#end
#end
